# Thanos  Compactor

对对象存储里的数据进行压缩，降准采样，设置保留策略等。
为了数据安全，一个bucket只能有一个进程处理。运行命令后，默认会为bucket里的数据创建5分钟间隔的采样和1小时间隔的采样。这对于长时间跨度的范围查询来说，非常有利，建议开启。另外采样并不会减少磁盘空间的占有，相反采样会增加大约3倍的磁盘空间消耗。因为采样是保留原始数据基础上增加了block来存储采样数据。如果你数据保留时间比较短，或者历史数据查询比较少，可以通过参数 --downsampling.disable 来禁用采样功能。另外block里的数据超过设置的保留时间后并不会直接删除，而是通过上传deletion-mark.json来标记为删除状态，默认48小时后才会真正删除。

