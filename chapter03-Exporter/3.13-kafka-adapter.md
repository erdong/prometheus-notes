
# Prometheus Kafka Adapter



telefonica/prometheus-kafka-adapter

Use Kafka as a remote storage database for Prometheus (remote write only)

https://github.com/telefonica/prometheus-kafka-adapter


Prometheus 配置



scrape_configs:

- job_name: 'promtsdb'
static_configs:
- targets:
- 127.0.0.1:10207

#远程写到 kafka adapter

remote_write:
- url: "http://10.129.49.251:8081/receive"



```
#!/usr/bin/env bash

docker run -d --name prometheus-kafka-adapter-01 --restart=always -m 2g \
-e KAFKA_BROKER_LIST=192.168.50.90:9093 \
-e KAFKA_TOPIC=prometheus-metric-microservice \
-e PORT=10401 \
-e SERIALIZATION_FORMAT=json \
-e GIN_MODE=release \
-e LOG_LEVEL=debug \
-p 10401:10401 \
telefonica/prometheus-kafka-adapter:1.7.0 \
```

```
{
  "timestamp": "1970-01-01T00:00:00Z",
  "value": "9876543210",
  "name": "up",

  "labels": {
    "__name__": "up",
    "label1": "value1",
    "label2": "value2"
  }
}
```